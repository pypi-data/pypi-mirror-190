var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function p(t,e){t.value=null==e?"":e}let g;function h(t){g=t}function $(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const x=[],y=[],v=[],b=[],U=Promise.resolve();let _=!1;function w(t){v.push(t)}const C=new Set;let k=0;function A(){if(0!==k)return;const t=g;do{try{for(;k<x.length;){const t=x[k];k++,h(t),j(t.$$)}}catch(t){throw x.length=0,k=0,t}for(h(null),x.length=0,k=0;y.length;)y.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];C.has(e)||(C.add(e),e())}v.length=0}while(x.length);for(;b.length;)b.pop()();_=!1,C.clear(),h(t)}function j(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}const E=new Set;let N;function T(){N={r:0,c:[],p:N}}function L(){N.r||r(N.c),N=N.p}function S(t,e){t&&t.i&&(E.delete(t),t.i(e))}function O(t,e,n,r){if(t&&t.o){if(E.has(t))return;E.add(t),N.c.push((()=>{E.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function P(t){t&&t.c()}function R(t,n,c,s){const{fragment:l,after_update:a}=t.$$;l&&l.m(n,c),s||w((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]})),a.forEach(w)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(t,e){-1===t.$$.dirty[0]&&(x.push(t),_||(_=!0,U.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function M(e,o,c,s,l,i,u,d=[-1]){const f=g;h(e);const m=e.$$={fragment:null,ctx:[],props:i,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:o.target||f.$$.root};u&&u(m.root);let p=!1;if(m.ctx=c?c(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return m.ctx&&l(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),p&&I(e,t)),n})):[],m.update(),p=!0,r(m.before_update),m.fragment=!!s&&s(m.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);m.fragment&&m.fragment.l(t),t.forEach(a)}else m.fragment&&m.fragment.c();o.intro&&S(e.$$.fragment),R(e,o.target,o.anchor,o.customElement),A()}h(f)}class q{$destroy(){B(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function z(t){return function(t,e){if(e(t))return t;throw Error(t.statusText)}(t,(t=>t.status>=200&&t.status<=299))}function D(e){let n,r,o;return{c(){n=i("p"),r=u(e[0]),f(n,"class",o="notification is-light className "+e[1]+" svelte-1xnji6g")},m(t,e){l(t,n,e),s(n,r)},p(t,[e]){1&e&&m(r,t[0]),2&e&&o!==(o="notification is-light className "+t[1]+" svelte-1xnji6g")&&f(n,"class",o)},i:t,o:t,d(t){t&&a(n)}}}function F(t,e,n){let r,{text:o}=e,{category:c}=e;const s={success:"is-success",error:"is-danger",info:"is-info",warning:"is-warning"};return t.$$set=t=>{"text"in t&&n(0,o=t.text),"category"in t&&n(2,c=t.category)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=s[c]||"")},[o,r,c]}class H extends q{constructor(t){super(),M(this,t,F,D,c,{text:0,category:2})}}function J(t){let e,n,r;return{c(){e=i("input"),f(e,"type","hidden"),f(e,"name","url")},m(o,c){l(o,e,c),p(e,t[1]),n||(r=d(e,"input",t[8]),n=!0)},p(t,n){2&n&&p(e,t[1])},d(t){t&&a(e),n=!1,r()}}}function G(t){let e,n,r,o,c,u;return{c(){e=i("div"),n=i("label"),n.textContent="URL",r=i("div"),o=i("input"),f(n,"class","label"),f(n,"for","url"),f(o,"class","input"),f(o,"id","url"),f(o,"type","url"),f(o,"name","url"),f(o,"placeholder","The URL of the resource to comment"),f(r,"class","control"),f(e,"class","field")},m(a,i){l(a,e,i),s(e,n),s(e,r),s(r,o),p(o,t[1]),c||(u=d(o,"input",t[7]),c=!0)},p(t,e){2&e&&p(o,t[1])},d(t){t&&a(e),c=!1,u()}}}function K(t){let e,n,r;return n=new H({props:{text:t[3],category:t[4]}}),{c(){e=i("div"),P(n.$$.fragment),f(e,"class","control is-expended")},m(t,o){l(t,e,o),R(n,e,null),r=!0},p(t,e){const r={};8&e&&(r.text=t[3]),16&e&&(r.category=t[4]),n.$set(r)},i(t){r||(S(n.$$.fragment,t),r=!0)},o(t){O(n.$$.fragment,t),r=!1},d(t){t&&a(e),B(n)}}}function Q(t){let e,n,o,c,u,m,g,h,$,x;function y(t,e){return""===t[0]?G:J}let v=y(t),b=v(t),U=t[3]&&K(t);return{c(){e=i("form"),b.c(),n=i("div"),o=i("label"),o.textContent="Text",c=i("div"),u=i("textarea"),m=i("div"),g=i("div"),g.innerHTML='<button class="button is-link">Comment</button>',U&&U.c(),f(o,"class","label"),f(o,"for","text"),f(u,"class","textarea"),f(u,"id","text"),f(u,"type","text"),f(u,"name","text"),f(c,"class","control"),f(n,"class","field"),f(g,"class","control"),f(m,"class","field is-grouped")},m(r,a){var i;l(r,e,a),b.m(e,null),s(e,n),s(n,o),s(n,c),s(c,u),p(u,t[2]),s(e,m),s(m,g),U&&U.m(m,null),h=!0,$||(x=[d(u,"input",t[9]),d(e,"submit",(i=t[5],function(t){return t.preventDefault(),i.call(this,t)}))],$=!0)},p(t,[r]){v===(v=y(t))&&b?b.p(t,r):(b.d(1),b=v(t),b&&(b.c(),b.m(e,n))),4&r&&p(u,t[2]),t[3]?U?(U.p(t,r),8&r&&S(U,1)):(U=K(t),U.c(),S(U,1),U.m(m,null)):U&&(T(),O(U,1,1,(()=>{U=null})),L())},i(t){h||(S(U),h=!0)},o(t){O(U),h=!1},d(t){t&&a(e),b.d(),U&&U.d(),$=!1,r(x)}}}function V(t,e,n){let{addComment:r=((t,e,n)=>console.error("Not Implemented!"))}=e,{targetUrl:o=""}=e,c="",s="",l="",a="";const i=()=>{n(3,l="Comment added!"),n(4,a="success"),""===o&&n(1,c=""),n(2,s="")},u=()=>{n(3,l="Something unexpected happened!?"),n(4,a="error")};return $((async()=>{n(1,c=o)})),t.$$set=t=>{"addComment"in t&&n(6,r=t.addComment),"targetUrl"in t&&n(0,o=t.targetUrl)},[o,c,s,l,a,()=>r({url:c,text:s},i,u),r,function(){c=this.value,n(1,c)},function(){c=this.value,n(1,c)},function(){s=this.value,n(2,s)}]}class W extends q{constructor(t){super(),M(this,t,V,Q,c,{addComment:6,targetUrl:0})}}function X(e){let n,r,o,c,d,p;return{c(){n=i("div"),r=i("pre"),o=u(e[0]),c=i("p"),d=i("a"),p=u(e[1]),f(r,"class","text"),f(d,"class","url"),f(d,"href",e[1]),f(n,"class","comment"),f(n,"date",e[2])},m(t,e){l(t,n,e),s(n,r),s(r,o),s(n,c),s(c,d),s(d,p)},p(t,[e]){1&e&&m(o,t[0]),2&e&&m(p,t[1]),2&e&&f(d,"href",t[1]),4&e&&f(n,"date",t[2])},i:t,o:t,d(t){t&&a(n)}}}function Y(t,e,n){let{text:r}=e,{url:o}=e,{created:c}=e;return t.$$set=t=>{"text"in t&&n(0,r=t.text),"url"in t&&n(1,o=t.url),"created"in t&&n(2,c=t.created)},[r,o,c]}class Z extends q{constructor(t){super(),M(this,t,Y,X,c,{text:0,url:1,created:2})}}function tt(t,e,n){const r=t.slice();return r[4]=e[n],r}function et(t){let e,n,r=t[1],o=[];for(let e=0;e<r.length;e+=1)o[e]=nt(tt(t,r,e));const c=t=>O(o[t],1,1,(()=>{o[t]=null}));return{c(){e=i("div");for(let t=0;t<o.length;t+=1)o[t].c();f(e,"class","comments")},m(t,r){l(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,n){if(2&n){let s;for(r=t[1],s=0;s<r.length;s+=1){const c=tt(t,r,s);o[s]?(o[s].p(c,n),S(o[s],1)):(o[s]=nt(c),o[s].c(),S(o[s],1),o[s].m(e,null))}for(T(),s=r.length;s<o.length;s+=1)c(s);L()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)S(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)O(o[t]);n=!1},d(t){t&&a(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t)}}}function nt(t){let e,n;return e=new Z({props:{text:t[4].text,url:t[4].url,created:t[4].created}}),{c(){P(e.$$.fragment)},m(t,r){R(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.text=t[4].text),2&n&&(r.url=t[4].url),2&n&&(r.created=t[4].created),e.$set(r)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function rt(t){let e,n,r,o,c,d,p,g,h,$,x,y,v;h=new W({props:{addComment:t[3],targetUrl:t[2]}});let b=t[1]&&t[1].length>0&&et(t);return{c(){e=i("div"),n=i("section"),r=i("div"),o=i("h1"),c=u(t[0]),d=i("section"),p=i("div"),g=i("h2"),g.textContent="Add a comment onâ€¦",P(h.$$.fragment),$=i("section"),x=i("div"),y=i("h2"),y.textContent="Past comments",b&&b.c(),f(o,"class","title is-1"),f(r,"class","container"),f(n,"class","section svelte-k9gotj"),f(g,"class","title is-3"),f(p,"class","container"),f(d,"class","section svelte-k9gotj"),f(y,"class","title is-3"),f(x,"class","container"),f($,"class","section svelte-k9gotj"),f(e,"class","page")},m(t,a){l(t,e,a),s(e,n),s(n,r),s(r,o),s(o,c),s(e,d),s(d,p),s(p,g),R(h,p,null),s(e,$),s($,x),s(x,y),b&&b.m(x,null),v=!0},p(t,[e]){(!v||1&e)&&m(c,t[0]);const n={};8&e&&(n.addComment=t[3]),4&e&&(n.targetUrl=t[2]),h.$set(n),t[1]&&t[1].length>0?b?(b.p(t,e),2&e&&S(b,1)):(b=et(t),b.c(),S(b,1),b.m(x,null)):b&&(T(),O(b,1,1,(()=>{b=null})),L())},i(t){v||(S(h.$$.fragment,t),S(b),v=!0)},o(t){O(h.$$.fragment,t),O(b),v=!1},d(t){t&&a(e),B(h),b&&b.d()}}}function ot(t,e,n){let{name:r=""}=e,{comments:o=[]}=e,{targetUrl:c=""}=e,{addComment:s=((t,e,n)=>console.error("Not Implemented!"))}=e;return t.$$set=t=>{"name"in t&&n(0,r=t.name),"comments"in t&&n(1,o=t.comments),"targetUrl"in t&&n(2,c=t.targetUrl),"addComment"in t&&n(3,s=t.addComment)},[r,o,c,s]}class ct extends q{constructor(t){super(),M(this,t,ot,rt,c,{name:0,comments:1,targetUrl:2,addComment:3})}}function st(t){let e,n;return e=new ct({props:{name:lt,comments:t[1],targetUrl:t[0],addComment:t[2]}}),{c(){P(e.$$.fragment)},m(t,r){R(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.comments=t[1]),1&n&&(r.targetUrl=t[0]),e.$set(r)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}let lt="A stream";function at(t,e){return t.created<e.created?1:t.created>e.created?-1:0}function it(t,e,n){let{streamApiUrl:r}=e,{targetUrl:o=""}=e,c=[];async function s(){let t=r;""!==o&&(t=t+"?url="+o),fetch(t).then(z).then((t=>t.json())).then((t=>{n(1,c=function(t){return n(1,c=[...t]),c.sort(at),c}(t))})).catch((t=>console.error(t)))}return $((async()=>{s()})),t.$$set=t=>{"streamApiUrl"in t&&n(3,r=t.streamApiUrl),"targetUrl"in t&&n(0,o=t.targetUrl)},[o,c,function(t,e,o){const s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t.url,text:t.text})};fetch(r,s).then(z).then((()=>{n(1,c=[t,...c]),e()})).catch((()=>o("Something weird happened!")))},r]}const ut=new URL(window.location.href).searchParams.get("url")||"";return new class extends q{constructor(t){super(),M(this,t,it,st,c,{streamApiUrl:3,targetUrl:0})}}({target:document.body,props:{streamApiUrl:document.body.dataset.streamApiUrl,targetUrl:ut}})}();
//# sourceMappingURL=no-comment.js.map
