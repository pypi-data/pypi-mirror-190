{"version":3,"file":"extraDataTests.js","names":["suite","model","beforeEach","Resource","Backbone","Model","extend","_","defaults","extraData","initialize","_setupExtraData","RB","ExtraDataMixin","it","callbacks","spyOn","on","change","setExtraData","expect","toHaveBeenCalled","oldExtraData","attributes","toBe","set","foo","toEqual","not"],"sources":["../../../../../../static/rb/js/models/tests/extraDataTests.es6.js"],"sourcesContent":["suite('rb/models/ExtraData', function() {\n    let model;\n\n    beforeEach(function() {\n        const Resource = Backbone.Model.extend(_.defaults({\n            defaults() {\n                return {\n                    extraData: {},\n                };\n            },\n\n            initialize() {\n                this._setupExtraData();\n            },\n        }, RB.ExtraDataMixin));\n\n        model = new Resource();\n    });\n\n    it('change events fired', function() {\n        const callbacks = {\n            'change': function() {},\n            'change:extraData': function() {},\n        };\n\n        spyOn(callbacks, 'change');\n        spyOn(callbacks, 'change:extraData');\n\n        model.on('change', callbacks.change);\n        model.on('change:extraData', callbacks['change:extraData']);\n\n        model.setExtraData('foo', 1);\n\n        expect(callbacks.change).toHaveBeenCalled();\n        expect(callbacks['change:extraData']).toHaveBeenCalled();\n    });\n\n    it('attributes updated', function() {\n        const oldExtraData = model.attributes.extraData;\n\n        expect(model.extraData.attributes).toBe(oldExtraData);\n\n        model.set({\n            extraData: {\n                foo: 1,\n            },\n        });\n\n        expect(model.attributes.extraData).toEqual({foo: 1});\n        expect(model.extraData.attributes).toEqual({foo: 1});\n\n        expect(model.extraData.attributes).not.toBe(oldExtraData);\n        expect(model.attributes.extraData).not.toBe(oldExtraData);\n\n        expect(model.extraData.attributes).toBe(model.attributes.extraData);\n    });\n});\n"],"mappings":";;AAAAA,KAAK,CAAC,qBAAqB,EAAE,YAAW;EACpC,IAAIC,KAAK;EAETC,UAAU,CAAC,YAAW;IAClB,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,KAAK,CAACC,MAAM,CAACC,CAAC,CAACC,QAAQ,CAAC;MAC9CA,QAAQ,GAAG;QACP,OAAO;UACHC,SAAS,EAAE,CAAC;QAChB,CAAC;MACL,CAAC;MAEDC,UAAU,GAAG;QACT,IAAI,CAACC,eAAe,EAAE;MAC1B;IACJ,CAAC,EAAEC,EAAE,CAACC,cAAc,CAAC,CAAC;IAEtBZ,KAAK,GAAG,IAAIE,QAAQ,EAAE;EAC1B,CAAC,CAAC;EAEFW,EAAE,CAAC,qBAAqB,EAAE,YAAW;IACjC,MAAMC,SAAS,GAAG;MACd,QAAQ,EAAE,YAAW,CAAC,CAAC;MACvB,kBAAkB,EAAE,YAAW,CAAC;IACpC,CAAC;IAEDC,KAAK,CAACD,SAAS,EAAE,QAAQ,CAAC;IAC1BC,KAAK,CAACD,SAAS,EAAE,kBAAkB,CAAC;IAEpCd,KAAK,CAACgB,EAAE,CAAC,QAAQ,EAAEF,SAAS,CAACG,MAAM,CAAC;IACpCjB,KAAK,CAACgB,EAAE,CAAC,kBAAkB,EAAEF,SAAS,CAAC,kBAAkB,CAAC,CAAC;IAE3Dd,KAAK,CAACkB,YAAY,CAAC,KAAK,EAAE,CAAC,CAAC;IAE5BC,MAAM,CAACL,SAAS,CAACG,MAAM,CAAC,CAACG,gBAAgB,EAAE;IAC3CD,MAAM,CAACL,SAAS,CAAC,kBAAkB,CAAC,CAAC,CAACM,gBAAgB,EAAE;EAC5D,CAAC,CAAC;EAEFP,EAAE,CAAC,oBAAoB,EAAE,YAAW;IAChC,MAAMQ,YAAY,GAAGrB,KAAK,CAACsB,UAAU,CAACd,SAAS;IAE/CW,MAAM,CAACnB,KAAK,CAACQ,SAAS,CAACc,UAAU,CAAC,CAACC,IAAI,CAACF,YAAY,CAAC;IAErDrB,KAAK,CAACwB,GAAG,CAAC;MACNhB,SAAS,EAAE;QACPiB,GAAG,EAAE;MACT;IACJ,CAAC,CAAC;IAEFN,MAAM,CAACnB,KAAK,CAACsB,UAAU,CAACd,SAAS,CAAC,CAACkB,OAAO,CAAC;MAACD,GAAG,EAAE;IAAC,CAAC,CAAC;IACpDN,MAAM,CAACnB,KAAK,CAACQ,SAAS,CAACc,UAAU,CAAC,CAACI,OAAO,CAAC;MAACD,GAAG,EAAE;IAAC,CAAC,CAAC;IAEpDN,MAAM,CAACnB,KAAK,CAACQ,SAAS,CAACc,UAAU,CAAC,CAACK,GAAG,CAACJ,IAAI,CAACF,YAAY,CAAC;IACzDF,MAAM,CAACnB,KAAK,CAACsB,UAAU,CAACd,SAAS,CAAC,CAACmB,GAAG,CAACJ,IAAI,CAACF,YAAY,CAAC;IAEzDF,MAAM,CAACnB,KAAK,CAACQ,SAAS,CAACc,UAAU,CAAC,CAACC,IAAI,CAACvB,KAAK,CAACsB,UAAU,CAACd,SAAS,CAAC;EACvE,CAAC,CAAC;AACN,CAAC,CAAC"}