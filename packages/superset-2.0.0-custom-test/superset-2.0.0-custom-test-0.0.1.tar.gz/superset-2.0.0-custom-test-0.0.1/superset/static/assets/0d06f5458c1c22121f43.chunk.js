(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8551],{32132:function(e,t){var r,n;r=function(e){var t={time:{month:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthAbbr:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayOfWeek:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],dayOfWeekAbbr:["вс","пн","вт","ср","чт","пт","сб"]},legend:{selector:{all:"Всё",inverse:"Обратить"}},toolbox:{brush:{title:{rect:"Выделить область",polygon:"Инструмент «Лассо»",lineX:"Горизонтальное выделение",lineY:"Вертикальное выделение",keep:"Оставить выбранное",clear:"Очистить выбранное"}},dataView:{title:"Данные",lang:["Данные","Закрыть","Обновить"]},dataZoom:{title:{zoom:"Увеличить",back:"Сбросить увеличение"}},magicType:{title:{line:"Переключиться на линейный график",bar:"Переключиться на столбчатую диаграмму",stack:"Стопка",tiled:"Плитка"}},restore:{title:"Восстановить"},saveAsImage:{title:"Сохранить картинку",lang:["Правый клик, чтобы сохранить картинку"]}},series:{typeNames:{pie:"Круговая диаграмма",bar:"Столбчатая диаграмма",line:"Линейный график",scatter:"Точечная диаграмма",effectScatter:"Точечная диаграмма с волнами",radar:"Лепестковая диаграмма",tree:"Дерево",treemap:"Плоское дерево",boxplot:"Ящик с усами",candlestick:"Свечной график",k:"График К-линий",heatmap:"Тепловая карта",map:"Карта",parallel:"Диаграмма параллельных координат",lines:"Линейный граф",graph:"Граф отношений",sankey:"Диаграмма Санкей",funnel:"Воронкообразная диаграмма",gauge:"Шкала",pictorialBar:"Столбец-картинка",themeRiver:"Тематическая река",sunburst:"Солнечные лучи"}},aria:{general:{withTitle:'Это график, показывающий "{title}"',withoutTitle:"Это график"},series:{single:{prefix:"",withName:" с типом {seriesType} и именем {seriesName}.",withoutName:" с типом {seriesType}."},multiple:{prefix:". Он состоит из {seriesCount} серий.",withName:" Серия {seriesId} имеет тип {seriesType} и показывает {seriesName}.",withoutName:" Серия {seriesId} имеет тип {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"Данные таковы: ",partialData:"Первые {displayCnt} элементов: ",withName:"значение для {name} — {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},void 0===(n=r.apply(t,[t]))||(e.exports=n)},88551:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(67294),a=r(63475),l=r(6915),s=r(51995),i=r(356),o=r(49239),u=r(11965);const{RadioButtonControl:c}=i.Z,d=s.iK.div`
  text-align: center;
`;function h({formData:e,setControlValue:t}){const{extraControlsOptions:r,extraControlsHandler:a,extraValue:l}=function({formData:e,setControlValue:t}){const{stack:r,area:a}=e,[l,s]=(0,n.useState)(null!=r?r:void 0);return(0,n.useEffect)((()=>{s(r)}),[r]),{extraControlsOptions:(0,n.useMemo)((()=>a?o.O0:[]),[a]),extraControlsHandler:(0,n.useCallback)((e=>{a&&t&&(t("stack",e),s(e))}),[a,t]),extraValue:l}}({formData:e,setControlValue:t});return e.showExtraControls?(0,u.tZ)(d,null,(0,u.tZ)(c,{options:r,onChange:a,value:l})):null}function p({formData:e,height:t,width:r,echartOptions:s,groupby:i,labelMap:o,selectedValues:c,setDataMask:d,setControlValue:p,legendData:f=[]}){const{emitFilter:m,stack:g}=e,v=(0,n.useRef)(null),b=(0,n.useRef)(Date.now()),y=(0,n.useRef)(""),w=(0,n.useRef)(),k=(0,n.useCallback)((e=>{var t;const r=null==(t=v.current)?void 0:t.getEchartInstance();e?f.forEach((t=>{t===e?(l.aI.legend=t,null==r||r.dispatchAction({type:"legendSelect",name:t})):null==r||r.dispatchAction({type:"legendUnSelect",name:t})})):(l.aI.legend="",null==r||r.dispatchAction({type:"legendAllSelect"}))}),[f]),C=(0,n.useCallback)((e=>{if(!m)return;const t=e.map((e=>o[e]));d({extraFormData:{filters:0===e.length?[]:i.map(((e,r)=>{const n=t.map((e=>e[r]));return null==n?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:n}}))},filterState:{label:t.length?t:void 0,value:t.length?t:null,selectedValues:e.length?e:null}})}),[i,o,d,m]),x={click:e=>{w.current&&clearTimeout(w.current),w.current=setTimeout((()=>{const{seriesName:t}=e,r=Object.values(c);r.includes(t)?C(r.filter((e=>e!==t))):C([t])}),300)},mouseout:()=>{l.aI.name=""},mouseover:e=>{l.aI.name=e.seriesName},legendselectchanged:e=>{const t=Date.now();t-b.current<300&&y.current===e.name?k(e.name):(b.current=t,y.current=e.name),Object.values(e.selected).every((e=>!e))&&k()}},I={dblclick:e=>{var t;w.current&&clearTimeout(w.current);const r=[e.offsetX,e.offsetY],n=null==(t=v.current)?void 0:t.getEchartInstance();if(null!=n&&n.containPixel("grid",r)){var a;if(!g&&"ec-polygon"===(null==(a=e.target)?void 0:a.type))return;const t=n.getModel(),r=((e,t)=>{let r=e,n=null;for(;r;){const e=r.__ecComponentInfo;if(null!=e){n=t.getComponent(e.mainType,e.index);break}r=r.parent}return n})(e.target,t),l=t.getSeriesCount(),s=t.getCurrentSeriesIndices();if(r){const{name:e}=r;l!==s.length?k():k(e)}}}};return(0,u.tZ)(n.Fragment,null,(0,u.tZ)(h,{formData:e,setControlValue:p}),(0,u.tZ)(a.Z,{ref:v,height:t,width:r,echartOptions:s,eventHandlers:x,zrEventHandlers:I,selectedValues:c}))}},63475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(67294),a=r(51995),l=r(95225),s=r(32132),i=r.n(s),o=r(73917),u=r(11965);o.I2("RU",i());const c=a.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function d({width:e,height:t,echartOptions:r,eventHandlers:a,zrEventHandlers:s,selectedValues:i={}},o){const d=(0,n.useRef)(null),h=(0,n.useRef)(),p=(0,n.useMemo)((()=>Object.keys(i)||[]),[i]),f=(0,n.useRef)([]);return(0,n.useImperativeHandle)(o,(()=>({getEchartInstance:()=>h.current}))),(0,n.useEffect)((()=>{d.current&&(h.current||(h.current=(0,l.S1)(d.current,void 0,{locale:"RU"})),Object.entries(a||{}).forEach((([e,t])=>{var r,n;null==(r=h.current)||r.off(e),null==(n=h.current)||n.on(e,t)})),Object.entries(s||{}).forEach((([e,t])=>{var r,n;null==(r=h.current)||r.getZr().off(e),null==(n=h.current)||n.getZr().on(e,t)})),h.current.setOption(r,!0))}),[r,a,s]),(0,n.useEffect)((()=>{h.current&&(h.current.dispatchAction({type:"downplay",dataIndex:f.current.filter((e=>!p.includes(e)))}),p.length&&h.current.dispatchAction({type:"highlight",dataIndex:p}),f.current=p)}),[p]),(0,n.useEffect)((()=>{h.current&&h.current.resize({width:e,height:t})}),[e,t]),(0,u.tZ)(c,{ref:d,height:t,width:e})}const h=(0,n.forwardRef)(d)}}]);
//# sourceMappingURL=0d06f5458c1c22121f43.chunk.js.map