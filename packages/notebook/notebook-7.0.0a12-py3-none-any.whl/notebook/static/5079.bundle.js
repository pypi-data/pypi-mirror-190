(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[5079,4397],{35375:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>g});var r=n(89372),s=n(90157),a=n(90829),o=n(79866),i=n(83600),l=n(33013),c=n(69352),u=n(83124),d=n(93648),h=n(8309),p=n(30781);const g=[{id:"@jupyterlab/collaboration-extension:userMenu",autoStart:!0,requires:[],provides:l.IUserMenu,activate:t=>{const{commands:e}=t,{user:n}=t.serviceManager;return new l.UserMenu({commands:e,user:n})}},{id:"@jupyterlab/collaboration-extension:userMenuBar",autoStart:!0,requires:[l.IUserMenu],activate:async(t,e)=>{const{shell:n}=t,{user:r}=t.serviceManager;if("true"!==o.PageConfig.getOption("collaborative"))return;const s=new u.MenuBar({forceItemsPosition:{forceX:!1,forceY:!1},renderer:new l.RendererUserMenu(r)});s.id="jp-UserMenu",r.userChanged.connect((()=>s.update())),s.addMenu(e),n.add(s,"top",{rank:1e3})}},{id:"@jupyterlab/collaboration-extension:rtcGlobalAwareness",autoStart:!0,requires:[h.IStateDB],provides:l.IGlobalAwareness,activate:(t,e)=>{const{user:n}=t.serviceManager,i=new r.Doc;if("true"!==o.PageConfig.getOption("collaborative"))return new l.AwarenessMock(i);const c=new s.GL(i),u=d.ServerConnection.makeSettings(),h=o.URLExt.join(u.wsUrl,"api/yjs");new a.WebsocketProvider(h,"JupyterLab:globalAwareness",i,{awareness:c});const p=()=>{c.setLocalStateField("user",n.identity)};return n.isReady&&p(),n.ready.then(p).catch((t=>console.error(t))),n.userChanged.connect(p),e.changed.connect((async()=>{var t,n;const r=(null===(n=null===(t=(await e.toJSON())["layout-restorer:data"])||void 0===t?void 0:t.main)||void 0===n?void 0:n.current)||"";r.startsWith("editor")||r.startsWith("notebook")?c.setLocalStateField("current",r):c.setLocalStateField("current",null)})),c}},{id:"@jupyterlab/collaboration-extension:rtcPanel",autoStart:!0,requires:[l.IGlobalAwareness,p.ITranslator],activate:(t,e,n)=>{if("true"!==o.PageConfig.getOption("collaborative"))return;const{user:r}=t.serviceManager,s=n.load("jupyterlab"),a=new c.SidePanel;a.id=i.DOMUtils.createDomID(),a.title.icon=c.usersIcon,a.title.caption=s.__("Collaboration"),a.addClass("jp-RTCPanel"),t.shell.add(a,"left",{rank:300});const u=new l.UserInfoPanel(r);u.title.label=s.__("User info"),u.title.caption=s.__("User information"),a.addWidget(u);const d=new l.CollaboratorsPanel(r,e,(e=>{t.commands.execute("docmanager:open",{path:e})}));d.title.label=s.__("Online Collaborators"),a.addWidget(d)}}]},22592:(t,e,n)=>{"use strict";n.d(e,{JG:()=>s,UI:()=>o,Ue:()=>r,Yj:()=>i,Yu:()=>a});const r=()=>new Map,s=t=>{const e=r();return t.forEach(((t,n)=>{e.set(n,t)})),e},a=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},o=(t,e)=>{const n=[];for(const[r,s]of t)n.push(e(s,r));return n},i=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1}},11182:(t,e,n)=>{"use strict";n.d(e,{Fp:()=>o,GR:()=>l,GW:()=>r,VV:()=>a,Wn:()=>s,sQ:()=>i});const r=Math.floor,s=(Math.ceil,Math.abs),a=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),o=(t,e)=>t>e?t:e,i=(Number.isNaN,Math.pow),l=(Math.sign,t=>0!==t?t<0:1/t<0)},27061:t=>{var e,n,r=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:s}catch(t){e=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var i,l=[],c=!1,u=-1;function d(){c&&i&&(c=!1,i.length?l=i.concat(l):u=-1,l.length&&h())}function h(){if(!c){var t=o(d);c=!0;for(var e=l.length;e;){for(i=l,l=[];++u<e;)i&&i[u].run();u=-1,e=l.length}i=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||o(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},90157:(t,e,n)=>{"use strict";n.d(e,{Ag:()=>u,GL:()=>c,oy:()=>h,xq:()=>d});var r=n(74833),s=n(66962),a=n(2431),o=n(11182),i=n(12330),l=n(38828);n(89372);class c extends i.y{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=a.ZG();null!==this.getLocalState()&&15e3<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((n,r)=>{r!==this.clientID&&3e4<=t-n.lastUpdated&&this.states.has(r)&&e.push(r)})),e.length>0&&u(this,e,"timeout")}),o.GW(3e3)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),r=void 0===n?0:n.clock+1,s=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:r,lastUpdated:a.ZG()});const o=[],i=[],c=[],u=[];null===t?u.push(e):null==s?null!=t&&o.push(e):(i.push(e),l.Hi(s,t)||c.push(e)),(o.length>0||c.length>0||u.length>0)&&this.emit("change",[{added:o,updated:c,removed:u},"local"]),this.emit("update",[{added:o,updated:i,removed:u},"local"])}setLocalStateField(t,e){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const u=(t,e,n)=>{const r=[];for(let n=0;n<e.length;n++){const s=e[n];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const e=t.meta.get(s);t.meta.set(s,{clock:e.clock+1,lastUpdated:a.ZG()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},d=(t,e,n=t.states)=>{const s=e.length,a=r.Mf();r.uE(a,s);for(let o=0;o<s;o++){const s=e[o],i=n.get(s)||null,l=t.meta.get(s).clock;r.uE(a,s),r.uE(a,l),r.uw(a,JSON.stringify(i))}return r._f(a)},h=(t,e,n)=>{const r=s.l1(e),o=a.ZG(),i=[],c=[],u=[],d=[],h=s.yg(r);for(let e=0;e<h;e++){const e=s.yg(r);let n=s.yg(r);const a=JSON.parse(s.kf(r)),h=t.meta.get(e),p=t.states.get(e),g=void 0===h?0:h.clock;(g<n||g===n&&null===a&&t.states.has(e))&&(null===a?e===t.clientID&&null!=t.getLocalState()?n++:t.states.delete(e):t.states.set(e,a),t.meta.set(e,{clock:n,lastUpdated:o}),void 0===h&&null!==a?i.push(e):void 0!==h&&null===a?d.push(e):null!==a&&(l.Hi(a,p)||u.push(e),c.push(e)))}(i.length>0||u.length>0||d.length>0)&&t.emit("change",[{added:i,updated:u,removed:d},n]),(i.length>0||c.length>0||d.length>0)&&t.emit("update",[{added:i,updated:c,removed:d},n])}}}]);